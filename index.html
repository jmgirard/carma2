<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CARMA2</title>
<style>
html,body{height:100%;margin:0;padding:0;}
body{display:flex;flex-direction:column;padding:20px;box-sizing:border-box;overflow:hidden;font-family:sans-serif;}
#layoutContainer{flex:1;display:flex;flex-direction:column;overflow:hidden;}
body.layout-right #layoutContainer{flex-direction:row;overflow:visible;}
#videoContainer{flex:1;background:#000;overflow:hidden;}
#videoPlayer{width:100%;height:100%;object-fit:contain;}
#sliderContainer{display:flex;overflow:visible;flex-shrink:0;gap:2px;}
body.layout-below #sliderContainer{flex-direction:column;margin-top:8px;}
body.layout-right #sliderContainer{flex-direction:row;align-items:center;margin-left:8px;gap:2px;}
#gradientBar{position:relative;overflow:visible;background:linear-gradient(var(--gradient-dir,to right),var(--color1,#0f0),var(--color2,#ff0),var(--color3,#f00));}
body.layout-below #gradientBar{width:100%;height:40px;margin-bottom:2px;}
body.layout-right #gradientBar{width:40px;height:100%;margin-right:8px;}
.min-label,.mid-label,.max-label{position:absolute;color:#000;font-size:12px;font-weight:bold;pointer-events:none;}
body.layout-below .min-label{left:4px;top:50%;transform:translateY(-50%);}
body.layout-below .mid-label{left:50%;top:50%;transform:translateY(-50%);}
body.layout-below .max-label{right:4px;top:50%;transform:translateY(-50%);}
body.layout-right .min-label{bottom:4px;left:50%;transform:translateX(-50%);}
body.layout-right .mid-label{top:50%;left:50%;transform:translate(-50%,-50%);}
body.layout-right .max-label{top:4px;left:50%;transform:translateX(-50%);}
body.layout-below #slider{width:100%;}
body.layout-right #slider{height:100%;width:20px;writing-mode:bt-lr;-webkit-appearance:slider-vertical;}
#slider::-webkit-slider-runnable-track {pointer-events: none;}
#slider::-webkit-slider-thumb {pointer-events: auto;}
#instruction { margin: 0; }
#actionContainer { display: flex; align-items: center; gap: 20px; margin-top: 10px; }
#modalOverlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);}
#settingsModal{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,0.3);z-index:1000;}
#settingsModal label{display:block;margin-bottom:8px;}
.settings-buttons{display:flex;justify-content:flex-end;gap:10px;margin-top:10px;}
</style>
</head>
<body class="layout-below">
<div id="layoutContainer">
  <div id="videoContainer">
    <video id="videoPlayer" controls controlsList="nodownload nofullscreen noremoteplayback noplaybackrate" disablePictureInPicture oncontextmenu="return false"></video>
  </div>
  <div id="sliderContainer">
    <div id="gradientBar">
      <span class="min-label"></span>
      <span class="mid-label"></span>
      <span class="max-label"></span>
    </div>
    <input id="slider" type="range" min="-3" max="3" step="0.5" value="0">
  </div>
</div>
<div id="actionContainer">
    <p id="instruction">Use <strong>mouse</strong> or <strong>Arrow Left/Right</strong> keys to adjust.</p>
    <div id="status"></div>
  </div>
</div>
<div id="modalOverlay"></div>
<div id="settingsModal">
  <label>Min: <input id="settingMin" type="number"></label>
  <label>Max: <input id="settingMax" type="number"></label>
  <label>Step: <input id="settingStep" type="number" step="any"></label>
  <label>Value: <input id="settingValue" type="number"></label>
  <label>Color 1: <input id="settingColor1" type="color" value="#00ff00"></label>
  <label>Color 2: <input id="settingColor2" type="color" value="#ffff00"></label>
  <label>Color 3: <input id="settingColor3" type="color" value="#ff0000"></label>
  <div class="settings-buttons">
    <button id="settingsSave">Save</button>
    <button id="settingsCancel">Cancel</button>
  </div>
</div>
<script src="renderer.js"></script>
</body>
</html>